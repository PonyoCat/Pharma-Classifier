# API -> FastAPI p√• 127.0.0.1:8000
location = /health        { proxy_pass http://127.0.0.1:8000/health; }
location = /docs          { proxy_pass http://127.0.0.1:8000/docs; }
location = /openapi.json  { proxy_pass http://127.0.0.1:8000/openapi.json; }

location /analyze  { proxy_pass http://127.0.0.1:8000/analyze; }
location /reports  { proxy_pass http://127.0.0.1:8000; }

# Statics fra frontend build
location ^~ /assets/ {
    root /var/app/current/frontend/dist;
    access_log off;
    expires 1h;
    add_header Cache-Control "public";
}

# SPA (index + fallback til client routes)
location / {
    root /var/app/current/frontend/dist;
    try_files $uri $uri/ /index.html;
    index index.html;
}
